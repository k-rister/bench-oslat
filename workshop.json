{
    "workshop": {
        "schema": {
            "version": "2020.03.02"
        }
    },
    "userenvs": [
        {
            "name": "default",
            "requirements": [
                "deps",
                "numactl_src",
		"rttests_patches",
                "rttests_src",
		"stress-ng_src"
            ]
        }
    ],
    "requirements": [
        {
            "name": "deps",
            "type": "distro",
            "distro_info": {
                "packages": [
		    "libtool",
		    "patch"
		]
            }
        },
        {
            "name": "numactl_src",
            "type": "source",
            "source_info": {
                "url": "https://github.com/numactl/numactl/releases/download/v2.0.14/numactl-2.0.14.tar.gz",
                "filename": "numactl.tar.gz",
                "commands": {
                    "unpack": "tar -xzf numactl.tar.gz",
                    "get_dir": "tar -tzf numactl.tar.gz | head -n 1",
                    "commands": [
                        "./configure --prefix=/usr",
                        "make",
                        "make install",
                        "ldconfig --verbose"
                    ]
                }
            }
        },
	{
	    "name": "rttests_patches",
	    "type": "files",
	    "files_info": {
		"files": [
		    {
			"src": "%bench-dir%/oslat-trace-updates.patch",
			"dst": "/root"
		    }
		]
	    }
	},
	{
	    "name": "rttests_src",
	    "type": "manual",
	    "manual_info": {
		"commands": [
		    "git clone git://git.kernel.org/pub/scm/utils/rt-tests/rt-tests.git /root/rt-tests",
		    "cd /root/rt-tests; git checkout unstable/devel/latest",
		    "cd /root/rt-tests; patch -p1 < /root/oslat-trace-updates.patch",
		    "cd /root/rt-tests; make",
		    "cd /root/rt-tests; make install",
		    "ldconfig"
		]
	    }
	},
	{
	    "name": "stress-ng_src",
	    "type": "source",
	    "source_info": {
		"url": "https://github.com/ColinIanKing/stress-ng/archive/refs/tags/V0.12.08.tar.gz",
		"filename": "stress-ng-0.12.08.tar.gz",
		"commands": {
		    "unpack": "tar -xzf stress-ng-0.12.08.tar.gz",
		    "get_dir": "tar -tzf stress-ng-0.12.08.tar.gz  | head -n 1",
		    "commands": [
			"make",
			"make install",
			"ldconfig"
		    ]
		}
	    }
	}
    ]
}
